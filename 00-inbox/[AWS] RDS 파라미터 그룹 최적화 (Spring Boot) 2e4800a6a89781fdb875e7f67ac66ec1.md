# [AWS] RDS νλΌλ―Έν„° κ·Έλ£Ή μµμ ν™” (Spring Boot)

π·οΈκΈ°μ  μΉ΄ν…κ³ λ¦¬: AWS, DataBase
π’΅ν•µμ‹¬ν‚¤μ›λ“: #μ„¤μ •κ΄€λ¦¬, #μ„±λ¥μµμ ν™”
π’Ό λ©΄μ ‘ λΉμ¶λ„: μƒ
β–οΈ μμ‚¬κ²°μ •(A vs B): Yes
λ‚ μ§: 2026λ…„ 1μ›” 10μΌ μ¤ν›„ 5:37

# 1. Abstract: ν•µμ‹¬ μ”μ•½

> **AWS RDS νλΌλ―Έν„° κ·Έλ£Ή**μ€ λ°μ΄ν„°λ² μ΄μ¤ μΈμ¤ν„΄μ¤μ λ™μ‘μ„ μ μ–΄ν•λ” μ„¤μ • λ¨μμ…λ‹λ‹¤. Spring Boot μ• ν”λ¦¬μΌ€μ΄μ…κ³Ό μ—°λ™ μ‹ **λ¬Έμ μΈμ½”λ”©, νƒ€μ„μ΅΄, μ»¤λ„¥μ… ν’€ μ„¤μ •**μ„ μµμ ν™”ν•μ§€ μ•μΌλ©΄ ν•κΈ€ κΉ¨μ§, μ‹κ°„ λ¶μΌμΉ, μ»¤λ„¥μ… λ¶€μ΅± λ“±μ λ¬Έμ κ°€ λ°μƒν•©λ‹λ‹¤.
> 

**ν•µμ‹¬ μ›μΉ™**: κΈ°λ³Έ νλΌλ―Έν„° κ·Έλ£Ήμ€ μμ • λ¶κ°€λ¥ν•λ―€λ΅ λ³µμ‚¬λ³Έμ„ λ§λ“¤μ–΄ μ»¤μ¤ν„°λ§μ΄μ§•ν•κ³ , **μ •μ  νλΌλ―Έν„° λ³€κ²½ μ‹ μ¬λ¶€ν… ν•„μ**

---

# 2. Technical Deep Dive: ν•„μ νλΌλ―Έν„°

## 2.1 μ•μ •μ„± λ° νΈν™μ„± νλΌλ―Έν„° (μ΄μ ν•„μ)

- character_set_server: utf8mb4
    
    **λ©μ **: ν•κΈ€, μ΄λ¨μ§€ λ“± λ‹¤κµ­μ–΄ μ €μ¥ μ¤λ¥ λ°©μ§€
    
    **λ¶„λ¥**: μ •μ  (μ¬λ¶€ν… ν•„μ)
    
    **μ‚¬λ΅€**: utf8μ€ μ΄λ¨μ§€ μ €μ¥ μ‹ μ—λ¬ λ°μƒ β†’ utf8mb4 μ‚¬μ© ν•„μ
    
- time_zone: Asia/Seoul
    
    **λ©μ **: Java μ• ν”λ¦¬μΌ€μ΄μ…κ³Ό DB μ‹κ°„ μΌμΉ
    
    **λ¶„λ¥**: λ™μ 
    
    **λ¬Έμ  μ‚¬λ΅€**: `createdDate`κ°€ 9μ‹κ°„ μ°¨μ΄λ΅ μ €μ¥λμ–΄ λΉ„μ¦λ‹μ¤ λ΅μ§ μ¤λ¥
    
- lower_case_table_names: 1
    
    **λ©μ **: ν…μ΄λΈ”λ… λ€μ†λ¬Έμ κµ¬λ¶„ λ°©μ§€
    
    **λ¶„λ¥**: μ •μ  (μ¬λ¶€ν… ν•„μ)
    
    **μ΄μ **: Windows/macOS κ°λ° ν™κ²½κ³Ό Linux μ΄μ ν™κ²½ κ°„ νΈν™μ„± λ³΄μ¥
    

## 2.2 μ„±λ¥ μµμ ν™” νλΌλ―Έν„°

- max_connections
    
    **μ„¤μ • λ°©λ²•**: μΈμ¤ν„΄μ¤ λ©”λ¨λ¦¬ κΈ°λ° κ³„μ‚°
    
    **Spring Boot μ—°λ™**: HikariCPμ `maximum-pool-size`λ³΄λ‹¤ μ¶©λ¶„ν μ»¤μ•Ό ν•¨
    
    **λ¬Έμ  μ‚¬λ΅€**: HikariCP 30, RDS max_connections 20 β†’ "Connection acquired failed" μ—λ¬
    
- innodb_buffer_pool_size
    
    **κ¶μ¥κ°’**: μΈμ¤ν„΄μ¤ λ©”λ¨λ¦¬μ 50~70%
    
    **ν¨κ³Ό**: λ°μ΄ν„°/μΈλ±μ¤ μΊμ‹±μΌλ΅ λ””μ¤ν¬ I/O μµμ†ν™”
    
    **DB μ„±λ¥μ— κ°€μ¥ ν° μν–¥μ„ λ―ΈμΉλ” νλΌλ―Έν„°**
    

---

# 3. Critical Thinking: HikariCP vs RDS max_connections

## β–οΈ μμ‚¬κ²°μ •: μ»¤λ„¥μ… ν’€ ν¬κΈ° μ„¤μ •

**Situation**: Spring Boot μ• ν”λ¦¬μΌ€μ΄μ…μ΄ λ¶€ν• μ‹ "Connection acquired failed" μ—λ¬ λ°μƒ

**λ¬Έμ  μ›μΈ λ¶„μ„**:

```yaml
# application.yml
spring:
  datasource:
    hikari:
      maximum-pool-size: 30  # μ• ν”λ¦¬μΌ€μ΄μ…μ΄ μµλ€ 30κ° μ»¤λ„¥μ… μ”κµ¬
```

```sql
-- RDS νλΌλ―Έν„°
SHOW VARIABLES LIKE 'max_connections';
-- κ²°κ³Ό: 20  β λ¬Έμ !
```

**β Before**: 

- RDS max_connections: 20 (κΈ°λ³Έκ°’)
- HikariCP maximum-pool-size: 30
- κ²°κ³Ό: 20κ° μ»¤λ„¥μ… μ΄κ³Ό μ‹ λ€κΈ° β†’ νƒ€μ„μ•„μ›ƒ μ—λ¬

**β… After**:

```sql
-- RDS νλΌλ―Έν„° κ·Έλ£Ή μμ •
max_connections = 50
```

**Decision**: 

RDS max_connectionsλ” **HikariCP maximum-pool-size Γ— (μΈμ¤ν„΄μ¤ μ) + μ—¬μ λ¶„**μΌλ΅ μ„¤μ •

**κ³µμ‹**: `max_connections >= (HikariCP ν’€ ν¬κΈ° Γ— WAS μΈμ¤ν„΄μ¤ μ) Γ— 1.2`

---

# 4. Project Case Study: μ‹¤λ¬΄ μ μ©

## π“¦ κ³µλ§¤ λ¬Όκ±΄ μ •λ³΄ κ΄€λ¦¬ μ‹μ¤ν… - λ°°μΉ μ²λ¦¬ μµμ ν™”

**S (Situation)**:

- μ¨λΉ„λ“ APIμ—μ„ λ€λ‰ λ°μ΄ν„° μμ§‘ μ¤‘ DB μ»¤λ„¥μ… λ¶€μ΅± μ—λ¬ λ°μƒ
- ν•κΈ€ λ¬Όκ±΄λ…μ΄ `???`λ΅ κΉ¨μ Έμ„ μ €μ¥λ¨

**T (Task)**:

- μ•μ •μ μΈ λ°°μΉ μ²λ¦¬λ¥Ό μ„ν• RDS νλΌλ―Έν„° μµμ ν™”
- ν•κΈ€ λ°μ΄ν„° μ •ν•©μ„± ν™•λ³΄

**A (Action)**:

1. **νλΌλ―Έν„° κ·Έλ£Ή μ»¤μ¤ν„°λ§μ΄μ§•**
    - character_set_server: utf8mb4
    - collation_server: utf8mb4_unicode_ci
    - max_connections: 100 (κΈ°μ΅΄ 20 β†’ 5λ°° μ¦κ°€)
2. **Spring Boot μ„¤μ • μ—°λ™**

```yaml
spring:
  datasource:
    url: jdbc:mariadb://rds-endpoint:3306/auction?characterEncoding=UTF-8
    hikari:
      maximum-pool-size: 20  # max_connectionsλ³΄λ‹¤ μ¶©λ¶„ν μ‘κ²
```

1. **μ¬λ¶€ν… λ° κ²€μ¦**
    - RDS μΈμ¤ν„΄μ¤ μ¬λ¶€ν… (μ •μ  νλΌλ―Έν„° μ μ©)
    - μ΄λ¨μ§€ ν¬ν•¨ ν…μ¤νΈ λ°μ΄ν„° insert μ„±κ³µ ν™•μΈ

**R (Result)**:

- β… ν•κΈ€ κΉ¨μ§ ν„μƒ 100% ν•΄κ²°
- β… λ°°μΉ μ‘μ—… μ¤‘ μ»¤λ„¥μ… μ—λ¬ 0κ±΄
- β… λ€λ‰ insert μ²λ¦¬ μ†λ„ 30% ν–¥μƒ (buffer_pool μµμ ν™” ν¨κ³Ό)

---

# 5. Interview Readiness: μμƒ μ§λ¬Έ

- Q: RDS κΈ°λ³Έ νλΌλ―Έν„° κ·Έλ£Ήμ„ μ™ μ§μ ‘ μμ •ν•  μ μ—†λ‚μ”?
    
    **A**: AWSλ” μ„λΉ„μ¤ μ•μ •μ„±μ„ μ„ν•΄ κΈ°λ³Έ νλΌλ―Έν„° κ·Έλ£Ήμ„ μ½κΈ° μ „μ©μΌλ΅ μ κ³µν•©λ‹λ‹¤. μ‹¤μλ΅ μ¤‘μ”ν• μ„¤μ •μ„ λ³€κ²½ν•΄ μ„λΉ„μ¤κ°€ μ¤‘λ‹¨λλ” κ²ƒμ„ λ°©μ§€ν•κΈ° μ„ν•¨μ…λ‹λ‹¤. λ”°λΌμ„ κΈ°λ³Έ κ·Έλ£Ήμ„ λ³µμ‚¬ν•΄μ„ μ»¤μ¤ν…€ νλΌλ―Έν„° κ·Έλ£Ήμ„ λ§λ“¤μ–΄μ•Ό ν•©λ‹λ‹¤.
    
- Q: character_set_serverλ¥Ό utf8mb4λ΅ μ„¤μ •ν–λ”λ°λ„ μ΄λ¨μ§€κ°€ μ• λ“¤μ–΄κ°‘λ‹λ‹¤. μ™ κ·Έλ΄κΉμ”?
    
    **A**: νλΌλ―Έν„° κ·Έλ£Ήμ„ λ³€κ²½ν• ν›„ **RDS μΈμ¤ν„΄μ¤λ¥Ό μ¬λ¶€ν…**ν•΄μ•Ό μ μ©λ©λ‹λ‹¤. character_set_serverλ” μ •μ  νλΌλ―Έν„°μ΄κΈ° λ•λ¬Έμ…λ‹λ‹¤. λν• μ΄λ―Έ μƒμ„±λ ν…μ΄λΈ”μ μ»¬λΌλ„ `ALTER TABLE ... CONVERT TO CHARACTER SET utf8mb4`λ΅ λ³€κ²½ν•΄μ•Ό ν•©λ‹λ‹¤.
    
- Q: HikariCP maximum-pool-sizeμ™€ RDS max_connectionsλ¥Ό μ–΄λ–»κ² μ„¤μ •ν•μ…¨λ‚μ”?
    
    **A**: WAS μΈμ¤ν„΄μ¤κ°€ 2λ€μ΄κ³  κ° HikariCP ν’€ ν¬κΈ°λ¥Ό 20μΌλ΅ μ„¤μ •ν–λ‹¤λ©΄, RDS max_connectionsλ” `20 Γ— 2 Γ— 1.2 = 48` μ΄μƒμΌλ΅ μ„¤μ •ν•©λ‹λ‹¤. μ—¬μ λ¶„ 20%λ” κ΄€λ¦¬ λ„κµ¬ μ ‘μ†μ΄λ‚ μμƒμΉ λ»ν• λ¶€ν•λ¥Ό λ€λΉ„ν• λ²„νΌμ…λ‹λ‹¤.
    

---

## π”‘ ν•µμ‹¬ μ²΄ν¬λ¦¬μ¤νΈ

- [ ]  κΈ°λ³Έ νλΌλ―Έν„° κ·Έλ£Ή λ³µμ‚¬ β†’ μ»¤μ¤ν…€ νλΌλ―Έν„° κ·Έλ£Ή μƒμ„±
- [ ]  character_set_server = utf8mb4 (ν•κΈ€/μ΄λ¨μ§€)
- [ ]  time_zone = Asia/Seoul (Java μ•±κ³Ό μ‹κ°„ μΌμΉ)
- [ ]  max_connections >= HikariCP ν’€ Γ— μΈμ¤ν„΄μ¤ μ Γ— 1.2
- [ ]  innodb_buffer_pool_size = λ©”λ¨λ¦¬μ 50~70%
- [ ]  **μ •μ  νλΌλ―Έν„° λ³€κ²½ μ‹ μ¬λ¶€ν… ν•„μ**