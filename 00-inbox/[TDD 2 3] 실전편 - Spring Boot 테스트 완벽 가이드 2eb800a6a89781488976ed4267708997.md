# [TDD 2/3] ì‹¤ì „í¸ - Spring Boot í…ŒìŠ¤íŠ¸ ì™„ë²½ ê°€ì´ë“œ

ğŸ·ï¸ê¸°ìˆ  ì¹´í…Œê³ ë¦¬: Spring, Testing
ğŸ’¡í•µì‹¬í‚¤ì›Œë“œ: #JUnit, #Mockito, #ë‹¨ìœ„í…ŒìŠ¤íŠ¸, #í†µí•©í…ŒìŠ¤íŠ¸
ğŸ’¼ ë©´ì ‘ ë¹ˆì¶œë„: ìƒ
âš–ï¸ ì˜ì‚¬ê²°ì •(A vs B): No
ë‚ ì§œ: 2026ë…„ 1ì›” 17ì¼ ì˜¤í›„ 5:57
ğŸ“… ë‹¤ìŒ ë³µìŠµì¼: 2026ë…„ 1ì›” 25ì¼

# 1. Abstract: í•µì‹¬ ìš”ì•½

> **Spring Boot í…ŒìŠ¤íŠ¸**ëŠ” ë‹¨ìœ„ í…ŒìŠ¤íŠ¸, í†µí•© í…ŒìŠ¤íŠ¸, Mockingì„ í™œìš©í•˜ì—¬ ì‹¤ì „ í”„ë¡œì íŠ¸ì—ì„œ TDDë¥¼ ì ìš©í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤. JUnit5, Mockito, AssertJë¥¼ ì‚¬ìš©í•˜ì—¬ íš¨ê³¼ì ì¸ í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.
> 

**í•µì‹¬ ê¸°ìˆ  ìŠ¤íƒ**:

- **JUnit 5**: í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬
- **Mockito**: Mock ê°ì²´ ìƒì„± ë° ê²€ì¦
- **AssertJ**: ìœ ì°½í•œ ë¬¸ë²•ì˜ assertion ë¼ì´ë¸ŒëŸ¬ë¦¬
- **@SpringBootTest**: í†µí•© í…ŒìŠ¤íŠ¸
- **@MockBean**: Spring ì»¨í…ìŠ¤íŠ¸ì—ì„œ Mock ì‚¬ìš©

---

# 2. Spring Boot í…ŒìŠ¤íŠ¸ í™˜ê²½ ì„¤ì •

## 2.1 ì˜ì¡´ì„± ì¶”ê°€

```
// build.gradle
dependencies {
    // Spring Boot Test Starter
    testImplementation 'org.springframework.boot:spring-boot-starter-test'
    
    // í¬í•¨ëœ ë¼ì´ë¸ŒëŸ¬ë¦¬:
    // - JUnit 5
    // - Mockito
    // - AssertJ
    // - Hamcrest
    // - Spring Test & Spring Boot Test
}
```

**í¬í•¨ëœ ë¼ì´ë¸ŒëŸ¬ë¦¬**:

- `JUnit 5` (Jupiter): í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬
- `Mockito`: Mocking í”„ë ˆì„ì›Œí¬
- `AssertJ`: Assertion ë¼ì´ë¸ŒëŸ¬ë¦¬
- `Spring Test`: Spring í…ŒìŠ¤íŠ¸ ì§€ì›
- `JSONassert`: JSON assertion
- `JsonPath`: JSON path expressions

---

## 2.2 í…ŒìŠ¤íŠ¸ ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
ğŸ“ src
â”œâ”€â”€ main
â”‚   â”œâ”€â”€ java
â”‚   â”‚   â””â”€â”€ com.bizsync.backend
â”‚   â”‚       â”œâ”€â”€ controller
â”‚   â”‚       â”œâ”€â”€ service
â”‚   â”‚       â”œâ”€â”€ domain
â”‚   â”‚       â””â”€â”€ repository
â”‚   â””â”€â”€ resources
â””â”€â”€ test
    â”œâ”€â”€ java
    â”‚   â””â”€â”€ com.bizsync.backend
    â”‚       â”œâ”€â”€ controller     # Controller í…ŒìŠ¤íŠ¸
    â”‚       â”œâ”€â”€ service        # Service ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
    â”‚       â”œâ”€â”€ repository     # Repository í…ŒìŠ¤íŠ¸
    â”‚       â””â”€â”€ integration    # í†µí•© í…ŒìŠ¤íŠ¸
    â””â”€â”€ resources
        â””â”€â”€ application-test.yml
```

---

# 3. ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ (Unit Test)

## 3.1 Service Layer ë‹¨ìœ„ í…ŒìŠ¤íŠ¸

### ê¸°ë³¸ íŒ¨í„´: Mockitoë¥¼ ì‚¬ìš©í•œ ê²©ë¦¬ëœ í…ŒìŠ¤íŠ¸

```java
@ExtendWith(MockitoExtension.class)  // JUnit 5 + Mockito
class AuthServiceTest {

    @InjectMocks  // í…ŒìŠ¤íŠ¸ ëŒ€ìƒ (ì‹¤ì œ ê°ì²´)
    private AuthService authService;

    @Mock  // ì˜ì¡´ì„± Mock
    private UserRepository userRepository;

    @Mock
    private PasswordEncoder passwordEncoder;

    @Mock
    private JwtProvider jwtProvider;

    @Test
    @DisplayName("ë¡œê·¸ì¸ ì„±ê³µ ì‹œ í† í°ì„ ë°˜í™˜í•´ì•¼ í•œë‹¤")
    void login_Success() {
        // given
        LoginRequestDTO request = new LoginRequestDTO(
            "[test@bizsync.com](mailto:test@bizsync.com)", 
            "1234"
        );

        User testUser = User.builder()
                .userId(1L)
                .email("[test@bizsync.com](mailto:test@bizsync.com)")
                .password("encoded_1234")
                .role(Role.MEMBER)
                .build();

        // Mock ë™ì‘ ì •ì˜
        given(userRepository.findByEmail([request.email](http://request.email)()))
            .willReturn(Optional.of(testUser));
        given(passwordEncoder.matches(request.password(), testUser.getPassword()))
            .willReturn(true);
        given(jwtProvider.createToken(any(), any()))
            .willReturn("access_token");
        given(jwtProvider.createRefreshToken(any()))
            .willReturn("refresh_token");

        // when
        JwtTokenResponse token = authService.login(request);

        // then
        assertThat(token).isNotNull();
        assertThat(token.getAccessToken()).isEqualTo("access_token");
        assertThat(token.getRefreshToken()).isEqualTo("refresh_token");
    }

    @Test
    @DisplayName("ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë¦¬ë©´ ì˜ˆì™¸ê°€ ë°œìƒí•´ì•¼ í•œë‹¤")
    void login_WrongPassword_ThrowsException() {
        // given
        LoginRequestDTO request = new LoginRequestDTO(
            "[test@bizsync.com](mailto:test@bizsync.com)", 
            "wrong_password"
        );
        
        User testUser = User.builder()
                .email("[test@bizsync.com](mailto:test@bizsync.com)")
                .password("encoded_1234")
                .build();

        given(userRepository.findByEmail([request.email](http://request.email)()))
            .willReturn(Optional.of(testUser));
        given(passwordEncoder.matches(request.password(), testUser.getPassword()))
            .willReturn(false);

        // when & then
        assertThatThrownBy(() -> authService.login(request))
                .isInstanceOf(IllegalArgumentException.class)
                .hasMessage("ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
    }
}
```

---

## 3.2 Mockito í•µì‹¬ ê°œë…

### @Mock vs @InjectMocks

```java
// @Mock: Mock ê°ì²´ ìƒì„±
@Mock
private UserRepository userRepository;  // ê°€ì§œ ê°ì²´

// @InjectMocks: Mockì„ ì£¼ì…ë°›ëŠ” ì‹¤ì œ ê°ì²´
@InjectMocks
private AuthService authService;  // ì‹¤ì œ ê°ì²´ (Mock ì£¼ì…ë¨)
```

**ë™ì‘ ë°©ì‹**:

```
1. @Mockìœ¼ë¡œ í‘œì‹œëœ ê°ì²´ë“¤ì„ ìƒì„±
   â†“
2. @InjectMocksë¡œ í‘œì‹œëœ ê°ì²´ì— Mockë“¤ì„ ì£¼ì…
   â†“
3. í…ŒìŠ¤íŠ¸ ì‹¤í–‰
```

---

### given() - when() - then() íŒ¨í„´

```java
// given: Mockì˜ ë™ì‘ ì •ì˜
given(userRepository.findByEmail("[test@example.com](mailto:test@example.com)"))
    .willReturn(Optional.of(testUser));

// when: ì‹¤ì œ í…ŒìŠ¤íŠ¸ ëŒ€ìƒ ë©”ì„œë“œ í˜¸ì¶œ
JwtTokenResponse result = authService.login(request);

// then: ê²°ê³¼ ê²€ì¦
assertThat(result).isNotNull();
assertThat(result.getAccessToken()).isNotEmpty();
```

---

### verify(): ë©”ì„œë“œ í˜¸ì¶œ ê²€ì¦

```java
@Test
@DisplayName("í”„ë¡œì íŠ¸ ìƒì„± ì‹œ ìƒì„±ìê°€ ë©¤ë²„ë¡œ ë“±ë¡ë˜ì–´ì•¼ í•œë‹¤")
void createProject_AutoAddCreatorAsMember() {
    // given
    Long userId = 1L;
    ProjectCreateRequestDTO req = new ProjectCreateRequestDTO(
        "í”„ë¡œì íŠ¸", "ì„¤ëª…", [LocalDate.now](http://LocalDate.now)(), 
        [LocalDate.now](http://LocalDate.now)().plusMonths(3), new BigDecimal("10000000")
    );

    User user = User.builder().userId(userId).build();
    Project project = Project.builder().projectId(10L).build();

    given(userRepository.findById(userId)).willReturn(Optional.of(user));
    given([projectRepository.save](http://projectRepository.save)(any(Project.class))).willReturn(project);

    // when
    Long projectId = projectService.createProject(userId, req);

    // then
    assertThat(projectId).isEqualTo(10L);
    
    // âœ… ë©”ì„œë“œ í˜¸ì¶œ ê²€ì¦
    verify(projectMemberRepository).save(any());  // 1ë²ˆ í˜¸ì¶œ í™•ì¸
    verify(projectMemberRepository, times(1)).save(any());  // ëª…ì‹œì 
    verify(projectMemberRepository, never()).delete(any());  // í˜¸ì¶œ ì•ˆ ë¨
}
```

**verify() ì˜µì…˜**:

- `verify(mock)`: 1ë²ˆ í˜¸ì¶œ
- `verify(mock, times(n))`: në²ˆ í˜¸ì¶œ
- `verify(mock, never())`: í˜¸ì¶œ ì•ˆ ë¨
- `verify(mock, atLeastOnce())`: ìµœì†Œ 1ë²ˆ
- `verify(mock, atLeast(n))`: ìµœì†Œ në²ˆ
- `verify(mock, atMost(n))`: ìµœëŒ€ në²ˆ

---

## 3.3 ArgumentMatchers

```java
import static org.mockito.ArgumentMatchers.*;

// any(): ì–´ë–¤ ê°’ì´ë“  ë§¤ì¹­
given(jwtProvider.createToken(any(), any()))
    .willReturn("token");

// anyString(), anyLong(), anyInt() ë“±
given(userRepository.findByEmail(anyString()))
    .willReturn(Optional.of(user));

// eq(): ì •í™•í•œ ê°’ ë§¤ì¹­
given(jwtProvider.createToken(eq(1L), any()))
    .willReturn("token");

// ì»¤ìŠ¤í…€ Matcher
given(userRepository.findByEmail(argThat(email -> 
    email.endsWith("@[bizsync.com](http://bizsync.com)")
))).willReturn(Optional.of(user));
```

**ì£¼ì˜ì‚¬í•­**:

```java
// âŒ ì˜ëª»ëœ ì˜ˆì‹œ
given(jwtProvider.createToken(1L, any()))  // ì»´íŒŒì¼ ì—ëŸ¬!

// âœ… ì˜¬ë°”ë¥¸ ì˜ˆì‹œ
given(jwtProvider.createToken(eq(1L), any()))  // eq() ì‚¬ìš©
```

---

# 4. í†µí•© í…ŒìŠ¤íŠ¸ (Integration Test)

## 4.1 @SpringBootTest

### ì „ì²´ Spring Context ë¡œë“œ

```java
@SpringBootTest  // ì „ì²´ Spring Context ë¡œë“œ
@AutoConfigureMockMvc  // MockMvc ìë™ ì„¤ì •
class AuthIntegrationTest {

    @Autowired
    private MockMvc mockMvc;  // HTTP ìš”ì²­ í…ŒìŠ¤íŠ¸

    @Autowired
    private ObjectMapper objectMapper;  // JSON ë³€í™˜

    @Test
    @DisplayName("ë¡œê·¸ì¸ API í…ŒìŠ¤íŠ¸")
    void loginTest() throws Exception {
        // given
        LoginRequestDTO request = new LoginRequestDTO(
            "[test@bizsync.com](mailto:test@bizsync.com)",
            "1234"
        );

        // when & then
        mockMvc.perform(post("/api/auth/login")
                .contentType(MediaType.APPLICATION_JSON)
                .content(objectMapper.writeValueAsString(request)))
            .andExpect(status().isOk())
            .andExpect(jsonPath("$.accessToken").exists())
            .andExpect(jsonPath("$.refreshToken").exists())
            .andDo(print());  // ìš”ì²­/ì‘ë‹µ ì¶œë ¥
    }
}
```

---

## 4.2 @MockBean

### Spring Contextì—ì„œ Mock ì‚¬ìš©

```java
@SpringBootTest
class OrderServiceIntegrationTest {

    @Autowired
    private OrderService orderService;  // ì‹¤ì œ ë¹ˆ

    @MockBean  // Spring Contextì˜ ë¹ˆì„ Mockìœ¼ë¡œ êµì²´
    private PaymentClient paymentClient;

    @MockBean
    private EmailService emailService;

    @Test
    void createOrder_Success() {
        // given
        given(paymentClient.charge(any())).willReturn(true);
        
        OrderRequest request = new OrderRequest(...);

        // when
        Long orderId = orderService.createOrder(request);

        // then
        assertThat(orderId).isNotNull();
        verify(emailService).sendOrderConfirmation(any());
    }
}
```

**@Mock vs @MockBean**:

- `@Mock`: Mockitoì˜ Mock (ë‹¨ìœ„ í…ŒìŠ¤íŠ¸)
- `@MockBean`: Spring Contextì˜ Beanì„ Mockìœ¼ë¡œ êµì²´ (í†µí•© í…ŒìŠ¤íŠ¸)

---

## 4.3 @DataJpaTest

### Repository í…ŒìŠ¤íŠ¸ ì „ìš©

```java
@DataJpaTest  // JPA ê´€ë ¨ ë¹ˆë§Œ ë¡œë“œ
@AutoConfigureTestDatabase(replace = Replace.NONE)  // ì‹¤ì œ DB ì‚¬ìš©
class UserRepositoryTest {

    @Autowired
    private UserRepository userRepository;

    @Autowired
    private TestEntityManager entityManager;  // í…ŒìŠ¤íŠ¸ìš© EntityManager

    @Test
    @DisplayName("ì´ë©”ì¼ë¡œ ì‚¬ìš©ì ì¡°íšŒ")
    void findByEmail_Success() {
        // given
        User user = User.builder()
                .email("[test@example.com](mailto:test@example.com)")
                .password("1234")
                .build();
        entityManager.persist(user);
        entityManager.flush();

        // when
        Optional<User> found = userRepository.findByEmail("[test@example.com](mailto:test@example.com)");

        // then
        assertThat(found).isPresent();
        assertThat(found.get().getEmail()).isEqualTo("[test@example.com](mailto:test@example.com)");
    }
}
```

**@DataJpaTest íŠ¹ì§•**:

- JPA ê´€ë ¨ ë¹ˆë§Œ ë¡œë“œ
- ê¸°ë³¸ì ìœ¼ë¡œ ë‚´ì¥ DB(H2) ì‚¬ìš©
- `@Transactional` ìë™ ì ìš© (ë¡¤ë°±)
- `TestEntityManager` ì œê³µ

---

# 5. AssertJ í™œìš©

## 5.1 ê¸°ë³¸ Assertions

```java
import static org.assertj.core.api.Assertions.*;

// ê¸°ë³¸ ê²€ì¦
assertThat(result).isNotNull();
assertThat(result).isEqualTo(expected);
assertThat(result).isNotEqualTo(other);

// ë¬¸ìì—´
assertThat(name).isEqualTo("John");
assertThat(name).startsWith("J");
assertThat(name).endsWith("n");
assertThat(name).contains("oh");
assertThat(name).hasSize(4);

// ìˆ«ì
assertThat(age).isEqualTo(25);
assertThat(age).isGreaterThan(18);
assertThat(age).isLessThan(100);
assertThat(age).isBetween(20, 30);

// ì»¨ë ‰ì…˜
assertThat(list).hasSize(3);
assertThat(list).contains("A", "B");
assertThat(list).containsExactly("A", "B", "C");  // ìˆœì„œ
 assertThat(list).containsOnly("A", "B", "C");  // ìˆœì„œ ë¬´ê´€
assertThat(list).doesNotContain("D");
assertThat(list).isEmpty();
```

---

## 5.2 ì˜ˆì™¸ ê²€ì¦

```java
// ì˜ˆì™¸ ë°œìƒ í™•ì¸
assertThatThrownBy(() -> userService.login(request))
    .isInstanceOf(IllegalArgumentException.class)
    .hasMessage("ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤");

// ë©”ì‹œì§€ íŒ¨í„´ ê²€ì¦
assertThatThrownBy(() -> service.doSomething())
    .hasMessageContaining("ì˜¤ë¥˜");

// ì˜ˆì™¸ê°€ ë°œìƒí•˜ì§€ ì•Šì•„ì•¼ í•¨
assertThatCode(() -> service.doSomething())
    .doesNotThrowAnyException();
```

---

## 5.3 ê°ì²´ í•„ë“œ ê²€ì¦

```java
// ë‹¨ì¼ í•„ë“œ
assertThat(user.getName()).isEqualTo("John");

// ì—¬ëŸ¬ í•„ë“œ í•œ ë²ˆì—
assertThat(user)
    .extracting("name", "age", "email")
    .containsExactly("John", 25, "[john@example.com](mailto:john@example.com)");

// ì»¤ìŠ¤í…€ ì¡°ê±´
assertThat(user)
    .satisfies(u -> {
        assertThat(u.getName()).isEqualTo("John");
        assertThat(u.getAge()).isGreaterThan(18);
    });
```

---

# 6. í…ŒìŠ¤íŠ¸ ì „ëµ

## 6.1 í…ŒìŠ¤íŠ¸ í”¼ë¼ë¯¸ë“œ

```
      /\
     /E2E\      10% - ëŠë¦¼, ë¹„ìŒˆ, ìœ ì§€ë³´ìˆ˜ ì–´ë ¤ì›€
    /------\     (@SpringBootTest ì „ì²´)
   /í†µí•©í…ŒìŠ¤íŠ¸\    20% - ì¤‘ê°„ ì†ë„
  /----------\   (@SpringBootTest ì¼ë¶€)
 /  ë‹¨ìœ„í…ŒìŠ¤íŠ¸  \  70% - ë¹ ë¦„, ì €ë ´, ìœ ì§€ë³´ìˆ˜ ì‰¬ì›€
/--------------\  (@ExtendWith(MockitoExtension.class))
```

**ê¶Œì¥ ë¹„ìœ¨**:

- ë‹¨ìœ„ í…ŒìŠ¤íŠ¸: 70%
- í†µí•© í…ŒìŠ¤íŠ¸: 20%
- E2E í…ŒìŠ¤íŠ¸: 10%

---

## 6.2 ë¬´ì—‡ì„ í…ŒìŠ¤íŠ¸í•  ê²ƒì¸ê°€?

### í…ŒìŠ¤íŠ¸í•´ì•¼ í•  ê²ƒ âœ…

```java
// 1. ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
@Test
void calculateDiscount_VIPê³ ê°_10í¼ì„¼íŠ¸í• ì¸() {
    // í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ í…ŒìŠ¤íŠ¸
}

// 2. ì˜ˆì™¸ ìƒí™©
@Test
void login_ì¡´ì¬í•˜ì§€ì•ŠëŠ”ì‚¬ìš©ì_ì˜ˆì™¸ë°œìƒ() {
    // ì˜ˆì™¸ ì¼€ì´ìŠ¤ í…ŒìŠ¤íŠ¸
}

// 3. ê²½ê³„ê°’
@Test
void validateAge_0ì„¸_ìœ íš¨í•˜ì§€ì•ŠìŒ() {
    // ê²½ê³„ê°’ í…ŒìŠ¤íŠ¸
}

// 4. ë³µì¡í•œ ì¡°ê±´ë¬¸
@Test
void isEligibleForPromotion_ë³µì¡í•œì¡°ê±´() {
    // ë³µì¡í•œ ë¡œì§ í…ŒìŠ¤íŠ¸
}
```

---

### í…ŒìŠ¤íŠ¸í•˜ì§€ ì•Šì•„ë„ ë˜ëŠ” ê²ƒ âŒ

```java
// 1. Getter/Setter
public String getName() {
    return name;  // í…ŒìŠ¤íŠ¸ ë¶ˆí•„ìš”
}

// 2. ë‹¨ìˆœ ë°ì´í„° ë³€í™˜
public UserDTO toDTO() {
    return new UserDTO([this.name](http://this.name), [this.email](http://this.email));  // ë‹¨ìˆœ ë³€í™˜
}

// 3. í”„ë ˆì„ì›Œí¬/ë¼ì´ë¸ŒëŸ¬ë¦¬ ì½”ë“œ
// Spring, JPAê°€ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ì€ í…ŒìŠ¤íŠ¸ ë¶ˆí•„ìš”
```

---

## 6.3 í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€

```bash
# Jacoco í”ŒëŸ¬ê·¸ì¸ ì¶”ê°€
plugins {
    id 'jacoco'
}

jacocoTestReport {
    reports {
        html.enabled true
        xml.enabled true
        csv.enabled false
    }
}

jacocoTestCoverageVerification {
    violationRules {
        rule {
            limit {
                minimum = 0.80  // 80% ì»¤ë²„ë¦¬ì§€
            }
        }
    }
}
```

**ì»¤ë²„ë¦¬ì§€ ëª©í‘œ**:

- í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§: 80-90%
- Service Layer: 70-80%
- Controller Layer: 60-70%
- ì „ì²´: 70% ì´ìƒ

---

# 7. ì‹¤ì „ íŒ¨í„´ ëª¨ìŒ

## 7.1 Given-When-Then íŒ¨í„´

```java
@Test
void í…ŒìŠ¤íŠ¸ë©”ì„œë“œ() {
    // given: í…ŒìŠ¤íŠ¸ ì¤€ë¹„
    User user = User.builder()
            .name("John")
            .build();
    given(userRepository.findById(1L))
        .willReturn(Optional.of(user));

    // when: í…ŒìŠ¤íŠ¸ ì‹¤í–‰
    UserDTO result = userService.getUser(1L);

    // then: ê²°ê³¼ ê²€ì¦
    assertThat(result.getName()).isEqualTo("John");
}
```

---

## 7.2 @DisplayName

```java
// âŒ ë‚˜ì¨
@Test
void test1() { ... }

// âœ… ì¢‹ìŒ
@Test
@DisplayName("ë¡œê·¸ì¸ ì„±ê³µ ì‹œ í† í°ì„ ë°˜í™˜í•´ì•¼ í•œë‹¤")
void login_Success_ReturnsToken() { ... }

// í•œê¸€ë¡œ ëª…í™•í•˜ê²Œ
@DisplayName("ë¹„ë°€ë²ˆí˜¸ê°€ 8ì ë¯¸ë§Œì´ë©´ ì˜ˆì™¸ê°€ ë°œìƒí•œë‹¤")
```

---

## 7.3 @ParameterizedTest

```java
@ParameterizedTest
@ValueSource(strings = {"", " ", "  "})
@DisplayName("ë¹ˆ ë¬¸ìì—´ì€ ìœ íš¨í•˜ì§€ ì•Šë‹¤")
void validate_EmptyString_Invalid(String input) {
    assertThatThrownBy(() -> validator.validate(input))
        .isInstanceOf(IllegalArgumentException.class);
}

@ParameterizedTest
@CsvSource({
    "[john@example.com](mailto:john@example.com), true",
    "invalid-email, false",
    "@[example.com](http://example.com), false"
})
void validateEmail(String email, boolean expected) {
    boolean result = validator.isValidEmail(email);
    assertThat(result).isEqualTo(expected);
}
```

---

## 7.4 @BeforeEach / @AfterEach

```java
class UserServiceTest {

    private UserService userService;
    private UserRepository userRepository;

    @BeforeEach  // ê° í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì „
    void setUp() {
        userRepository = mock(UserRepository.class);
        userService = new UserService(userRepository);
    }

    @AfterEach  // ê° í…ŒìŠ¤íŠ¸ ì‹¤í–‰ í›„
    void tearDown() {
        // ì •ë¦¬ ì‘ì—…
    }

    @Test
    void test1() { ... }

    @Test
    void test2() { ... }
}
```

---

# 8. Interview Readiness

## â–¶ Q1: ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ì™€ í†µí•© í…ŒìŠ¤íŠ¸ì˜ ì°¨ì´ëŠ”?

**A**: 

**ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ (Unit Test)**:

- í•˜ë‚˜ì˜ í´ë˜ìŠ¤/ë©”ì„œë“œë§Œ í…ŒìŠ¤íŠ¸
- ì˜ì¡´ì„±ì€ Mockìœ¼ë¡œ êµì²´
- `@ExtendWith(MockitoExtension.class)` ì‚¬ìš©
- ë¹ ë¥¸ ì‹¤í–‰ ì†ë„
- ì˜ˆ: Service ë¡œì§ë§Œ í…ŒìŠ¤íŠ¸

**í†µí•© í…ŒìŠ¤íŠ¸ (Integration Test)**:

- ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ê°€ í•¨ê»˜ ë™ì‘í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸
- Spring Contextë¥¼ ë¡œë“œ
- `@SpringBootTest` ì‚¬ìš©
- ëŠë¦° ì‹¤í–‰ ì†ë„
- ì˜ˆ: Controller â†” Service â†” Repository ì „ì²´ íë¦„

**ë¹„ìœ¨**: ë‹¨ìœ„(70%) > í†µí•©(20%) > E2E(10%)

---

## â–¶ Q2: @Mockê³¼ @MockBeanì˜ ì°¨ì´ëŠ”?

**A**:

**@Mock (Mockito)**:

- Mockitoê°€ ì œê³µí•˜ëŠ” ìˆœìˆ˜ Mock
- Spring Contextì™€ ë¬´ê´€
- ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ì—ì„œ ì‚¬ìš©
- `@ExtendWith(MockitoExtension.class)` í•„ìš”

```java
@ExtendWith(MockitoExtension.class)
class ServiceTest {
    @Mock
    private UserRepository userRepository;
    
    @InjectMocks
    private UserService userService;
}
```

**@MockBean (Spring Boot Test)**:

- Spring Contextì˜ Beanì„ Mockìœ¼ë¡œ êµì²´
- í†µí•© í…ŒìŠ¤íŠ¸ì—ì„œ ì‚¬ìš©
- `@SpringBootTest`ì™€ í•¨ê»˜ ì‚¬ìš©

```java
@SpringBootTest
class IntegrationTest {
    @MockBean
    private PaymentClient paymentClient;
    
    @Autowired
    private OrderService orderService;
}
```

---

## â–¶ Q3: given-when-then íŒ¨í„´ì„ ì„¤ëª…í•˜ì„¸ìš”

**A**: given-when-thenì€ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ êµ¬ì¡°í™”í•˜ëŠ” íŒ¨í„´ì…ë‹ˆë‹¤.

**given (ì¤€ë¹„)**:

- í…ŒìŠ¤íŠ¸ì— í•„ìš”í•œ ë°ì´í„° ë° Mock ë™ì‘ ì •ì˜
- ì˜ˆ: í…ŒìŠ¤íŠ¸ ë°ì´í„° ìƒì„±, Mock ì„¤ì •

**when (ì‹¤í–‰)**:

- ì‹¤ì œ í…ŒìŠ¤íŠ¸í•  ë™ì‘ ìˆ˜í–‰
- ì˜ˆ: í…ŒìŠ¤íŠ¸ ëŒ€ìƒ ë©”ì„œë“œ í˜¸ì¶œ

**then (ê²€ì¦)**:

- ê²°ê³¼ê°€ ê¸°ëŒ€í•œ ëŒ€ë¡œì¸ì§€ ê²€ì¦
- ì˜ˆ: assertionìœ¼ë¡œ ê²€ì¦, verifyë¡œ í˜¸ì¶œ í™•ì¸

ì´ íŒ¨í„´ì€ í…ŒìŠ¤íŠ¸ ì½”ë“œì˜ ê°€ë…ì„±ì„ í¬ê²Œ í–¥ìƒì‹œí‚¤ë©°, BDD(Behavior-Driven Development) ìŠ¤íƒ€ì¼ê³¼ë„ ì¼ì¹˜í•©ë‹ˆë‹¤.

---

## ğŸ”‘ í•µì‹¬ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ]  JUnit 5 + Mockito + AssertJ ì¡°í•©
- [ ]  @ExtendWith(MockitoExtension.class) ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
- [ ]  @SpringBootTest í†µí•© í…ŒìŠ¤íŠ¸
- [ ]  @Mock vs @MockBean ì°¨ì´ ì´í•´
- [ ]  given-when-then íŒ¨í„´ ì‚¬ìš©
- [ ]  verify()ë¡œ ë©”ì„œë“œ í˜¸ì¶œ ê²€ì¦
- [ ]  AssertJì˜ ìœ ì°½í•œ ë¬¸ë²• í™œìš©
- [ ]  í…ŒìŠ¤íŠ¸ í”¼ë¼ë¯¸ë“œ (70-20-10)
- [ ]  @DisplayNameìœ¼ë¡œ ëª…í™•í•œ ì„¤ëª…
- [ ]  ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì¤‘ì‹¬ í…ŒìŠ¤íŠ¸

---

**ì‘ì„±ì¼**: 2026-01-17  

**ì‹œë¦¬ì¦ˆ**: TDD ì™„ë²½ ì •ë³µ (2/3)  

**ë‹¤ìŒ í¸**: TDD ê³ ê¸‰í¸ - 2026ë…„ ìµœì‹  íŠ¸ë Œë“œ & ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤