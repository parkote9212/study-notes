---
tags:
  - study
  - spring
  - core
  - component-scan
  - annotation
created: 2025-02-08
---

# ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”

## í•œ ì¤„ ìš”ì•½
> ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì€ @Componentê°€ ë¶™ì€ í´ë˜ìŠ¤ë“¤ì„ ìë™ìœ¼ë¡œ ì°¾ì•„ Spring ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ëŠ” ê¸°ëŠ¥ìœ¼ë¡œ, ìˆ˜ë™ ë¹ˆ ë“±ë¡ì˜ ë²ˆê±°ë¡œì›€ì„ í•´ê²°í•œë‹¤.

## ìƒì„¸ ì„¤ëª…

### ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì´ë€?
- **ìë™ ë¹ˆ ë“±ë¡**: `@Component` ì• ë…¸í…Œì´ì…˜ì´ ë¶™ì€ í´ë˜ìŠ¤ë¥¼ ìŠ¤ìº”í•˜ì—¬ ìë™ìœ¼ë¡œ ë¹ˆ ë“±ë¡
- **@Autowiredë¥¼ í†µí•œ ìë™ ì˜ì¡´ê´€ê³„ ì£¼ì…**
- ì„¤ì • ì •ë³´ ì—†ì´ë„ ë¹ˆ ê´€ë¦¬ ê°€ëŠ¥

### ì™œ í•„ìš”í•œê°€?
```java
// ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ì´ì „: ëª¨ë“  ë¹ˆì„ ìˆ˜ë™ ë“±ë¡
@Configuration
public class AppConfig {
    @Bean
    public MemberService memberService() {
        return new MemberServiceImpl(memberRepository());
    }
    
    @Bean
    public MemberRepository memberRepository() {
        return new MemoryMemberRepository();
    }
    
    @Bean
    public OrderService orderService() {
        return new OrderServiceImpl(memberRepository(), discountPolicy());
    }
    // ... ìˆ˜ì‹­ ê°œì˜ @Bean ë©”ì„œë“œ
}
```
â†’ ë¹ˆì´ ë§ì•„ì§€ë©´ ê´€ë¦¬ê°€ ì–´ë ¤ì›€!

### ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ëŒ€ìƒ
- `@Component`: ì¼ë°˜ ì»´í¬ë„ŒíŠ¸
- `@Controller`: í”„ë ˆì  í…Œì´ì…˜ ê³„ì¸µ (MVC ì»¨íŠ¸ë¡¤ëŸ¬)
- `@Service`: ë¹„ì¦ˆë‹ˆìŠ¤ ê³„ì¸µ
- `@Repository`: ë°ì´í„° ì ‘ê·¼ ê³„ì¸µ (ì˜ˆì™¸ ë³€í™˜ AOP ì ìš©)
- `@Configuration`: ì„¤ì • ì •ë³´

> ğŸ’¡ `@Controller`, `@Service`, `@Repository`ëŠ” ëª¨ë‘ ë‚´ë¶€ì— `@Component`ë¥¼ í¬í•¨!

### ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ë²”ìœ„ ì„¤ì •

#### 1. ê¸°ë³¸ ìŠ¤ìº” ë²”ìœ„
```java
@ComponentScan  // ì´ í´ë˜ìŠ¤ê°€ ìœ„ì¹˜í•œ íŒ¨í‚¤ì§€ë¶€í„° í•˜ìœ„ íŒ¨í‚¤ì§€ ëª¨ë‘ ìŠ¤ìº”
@Configuration
public class AutoAppConfig {
}
```

#### 2. ëª…ì‹œì  ìŠ¤ìº” ë²”ìœ„ ì§€ì •
```java
@ComponentScan(
    basePackages = "com.example.member",  // ë¬¸ìì—´ë¡œ ì§€ì • (ì˜¤íƒ€ ìœ„í—˜)
    basePackageClasses = AutoAppConfig.class  // í´ë˜ìŠ¤ ê¸°ì¤€ (ê¶Œì¥)
)
```

#### 3. ìŠ¤ìº” í•„í„°
```java
@ComponentScan(
    includeFilters = @Filter(type = FilterType.ANNOTATION, 
                             classes = MyIncludeComponent.class),
    excludeFilters = @Filter(type = FilterType.ANNOTATION, 
                             classes = Configuration.class)
)
```

### ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ê¸°ë³¸ ì „ëµ
- **ë¹ˆ ì´ë¦„**: í´ë˜ìŠ¤ëª…ì˜ ë§¨ ì•ê¸€ìë¥¼ ì†Œë¬¸ìë¡œ ë³€ê²½
  - `MemberServiceImpl` â†’ `memberServiceImpl`
- **ìˆ˜ë™ ì§€ì •**: `@Component("customName")`

### ì¤‘ë³µ ë“±ë¡ê³¼ ì¶©ëŒ

#### ìë™ ë¹ˆ ë“±ë¡ vs ìë™ ë¹ˆ ë“±ë¡
```java
@Component("service")
public class MemberServiceImpl { }

@Component("service")  // âŒ ConflictingBeanDefinitionException ë°œìƒ
public class OrderServiceImpl { }
```

#### ìˆ˜ë™ ë¹ˆ ë“±ë¡ vs ìë™ ë¹ˆ ë“±ë¡
- ìˆ˜ë™ ë¹ˆì´ ìš°ì„ ê¶Œì„ ê°€ì§ (ì˜¤ë²„ë¼ì´ë”©)
- Spring BootëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ì˜¤ë¥˜ ë°œìƒì‹œí‚´ (ì¶©ëŒ ë°©ì§€)

## ì½”ë“œ ì˜ˆì‹œ

```java
// 1. ê¸°ë³¸ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ì„¤ì •
@Configuration
@ComponentScan(
    basePackages = "com.example",
    excludeFilters = @Filter(type = FilterType.ANNOTATION, 
                             classes = Configuration.class)
)
public class AutoAppConfig {
    // @Bean ë©”ì„œë“œ ì—†ìŒ!
}

// 2. @Componentì™€ @Autowired
@Component
public class MemberServiceImpl implements MemberService {
    
    private final MemberRepository memberRepository;
    
    @Autowired  // ìƒì„±ìê°€ í•˜ë‚˜ë©´ ìƒëµ ê°€ëŠ¥ (Spring 4.3+)
    public MemberServiceImpl(MemberRepository memberRepository) {
        this.memberRepository = memberRepository;
    }
}

@Component
public class MemoryMemberRepository implements MemberRepository {
    // ...
}

// 3. ê³„ì¸µë³„ ì• ë…¸í…Œì´ì…˜ í™œìš©
@Controller
public class MemberController {
    private final MemberService memberService;
    
    @Autowired
    public MemberController(MemberService memberService) {
        this.memberService = memberService;
    }
}

@Service
public class MemberServiceImpl implements MemberService {
    // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
}

@Repository  // ìŠ¤í”„ë§ ë°ì´í„° ì ‘ê·¼ ê³„ì¸µ ì¸ì‹, ì˜ˆì™¸ ë³€í™˜
public class JpaMemberRepository implements MemberRepository {
    // ë°ì´í„° ì ‘ê·¼ ë¡œì§
}

// 4. ë¹ˆ ì´ë¦„ ì¶©ëŒ í•´ê²°
@Component("memberService1")
public class MemberServiceImpl implements MemberService { }

@Component("memberService2")
public class MemberServiceImpl2 implements MemberService { }

// 5. ìŠ¤ìº” í•„í„° ì˜ˆì‹œ
@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
@Documented
public @interface MyIncludeComponent {
}

@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
@Documented
public @interface MyExcludeComponent {
}

@Configuration
@ComponentScan(
    includeFilters = @Filter(type = FilterType.ANNOTATION, 
                             classes = MyIncludeComponent.class),
    excludeFilters = @Filter(type = FilterType.ANNOTATION, 
                             classes = MyExcludeComponent.class)
)
public class ComponentFilterAppConfig { }

// 6. íŠ¹ì • íŒ¨í„´ìœ¼ë¡œ í•„í„°ë§
@Configuration
@ComponentScan(
    basePackages = "com.example",
    includeFilters = @Filter(type = FilterType.REGEX, 
                             pattern = ".*Service.*"),  // Serviceê°€ í¬í•¨ëœ í´ë˜ìŠ¤ë§Œ
    excludeFilters = @Filter(type = FilterType.REGEX, 
                             pattern = ".*Test.*")      // Testê°€ í¬í•¨ëœ í´ë˜ìŠ¤ ì œì™¸
)
public class RegexFilterConfig { }

// 7. ìƒì„±ìê°€ ì—¬ëŸ¬ ê°œì¼ ë•Œ
@Component
public class OrderServiceImpl implements OrderService {
    
    private final MemberRepository memberRepository;
    private final DiscountPolicy discountPolicy;
    
    @Autowired  // ëª…ì‹œì ìœ¼ë¡œ ì§€ì • í•„ìš”
    public OrderServiceImpl(MemberRepository memberRepository, 
                           DiscountPolicy discountPolicy) {
        this.memberRepository = memberRepository;
        this.discountPolicy = discountPolicy;
    }
    
    public OrderServiceImpl(MemberRepository memberRepository) {
        this(memberRepository, null);
    }
}

// 8. @Configurationê³¼ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”
@Configuration
@ComponentScan(basePackages = "com.example")
public class AppConfig {
    
    // ìˆ˜ë™ ë¹ˆ ë“±ë¡ë„ ê°€ëŠ¥ (íŠ¹ì • ë¹ˆë§Œ ìˆ˜ë™ìœ¼ë¡œ ê´€ë¦¬)
    @Bean
    public DatabaseClient databaseClient() {
        return new DatabaseClient();
    }
}

// 9. Spring Bootì˜ @SpringBootApplication
@SpringBootApplication  // ë‚´ë¶€ì— @ComponentScan í¬í•¨
public class Application {
    public static void main(String[] args) {
        SpringApplication.run(Application.class, args);
    }
}
```

## ì£¼ì˜ì‚¬í•­ / í•¨ì •

### 1. ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ë²”ìœ„ë¥¼ ë„ˆë¬´ ë„“ê²Œ ì„¤ì •
```java
@ComponentScan(basePackages = "com")  // âŒ ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ê¹Œì§€ ìŠ¤ìº”
@ComponentScan(basePackages = "")     // âŒ ëª¨ë“  íŒ¨í‚¤ì§€ ìŠ¤ìº” (ë§¤ìš° ëŠë¦¼)

// âœ… ì ì ˆí•œ ë²”ìœ„ ì§€ì •
@ComponentScan(basePackages = "com.example.myapp")
```

### 2. @Configuration í´ë˜ìŠ¤ë„ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ëŒ€ìƒ
```java
@Configuration
@ComponentScan(
    // @Configuration ì œì™¸í•˜ì§€ ì•Šìœ¼ë©´ ì„¤ì • í´ë˜ìŠ¤ë„ ìŠ¤ìº”ë¨
    excludeFilters = @Filter(type = FilterType.ANNOTATION, 
                             classes = Configuration.class)
)
public class AutoAppConfig { }
```

### 3. ìˆœí™˜ ì°¸ì¡° ë¬¸ì œ
```java
@Component
public class A {
    private final B b;
    
    @Autowired
    public A(B b) { this.b = b; }
}

@Component
public class B {
    private final A a;
    
    @Autowired
    public B(A a) { this.a = a; }  // âŒ ìˆœí™˜ ì°¸ì¡° ë°œìƒ!
}

// âœ… í•´ê²°: ì„¤ê³„ ê°œì„  ë˜ëŠ” @Lazy ì‚¬ìš©
@Component
public class A {
    private final B b;
    
    @Autowired
    public A(@Lazy B b) { this.b = b; }
}
```

### 4. ê°™ì€ ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„ì²´ê°€ ì—¬ëŸ¬ ê°œì¼ ë•Œ
```java
public interface DiscountPolicy { }

@Component
public class RateDiscountPolicy implements DiscountPolicy { }

@Component
public class FixDiscountPolicy implements DiscountPolicy { }

@Component
public class OrderService {
    private final DiscountPolicy discountPolicy;
    
    @Autowired
    public OrderService(DiscountPolicy discountPolicy) {  
        // âŒ ì–´ë–¤ êµ¬í˜„ì²´ë¥¼ ì£¼ì…í• ì§€ ëª¨í˜¸í•¨!
        this.discountPolicy = discountPolicy;
    }
}

// âœ… í•´ê²° ë°©ë²•
// 1. @Primary ì‚¬ìš©
@Component
@Primary
public class RateDiscountPolicy implements DiscountPolicy { }

// 2. @Qualifier ì‚¬ìš©
@Autowired
public OrderService(@Qualifier("rateDiscountPolicy") 
                   DiscountPolicy discountPolicy) { }

// 3. í•„ë“œëª…/íŒŒë¼ë¯¸í„°ëª… ë§¤ì¹­
@Autowired
public OrderService(DiscountPolicy rateDiscountPolicy) { }  // ë¹ˆ ì´ë¦„ìœ¼ë¡œ ë§¤ì¹­
```

### 5. @ComponentScanê³¼ basePackages ì‚¬ìš© ì‹œ ì£¼ì˜
```java
// âŒ ì˜ëª»ëœ íŒ¨í‚¤ì§€ëª… (ì»´íŒŒì¼ ì—ëŸ¬ ì—†ìŒ)
@ComponentScan(basePackages = "com.exmple")  // ì˜¤íƒ€!

// âœ… í´ë˜ìŠ¤ ê¸°ì¤€ ì‚¬ìš© (íƒ€ì… ì•ˆì „)
@ComponentScan(basePackageClasses = AutoAppConfig.class)
```

### 6. ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ë¶ˆê°€
```java
// âŒ ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ í´ë˜ìŠ¤ëŠ” @Componentë¥¼ ë¶™ì¼ ìˆ˜ ì—†ìŒ
// DataSource, ObjectMapper ë“±

// âœ… @Beanìœ¼ë¡œ ìˆ˜ë™ ë“±ë¡
@Configuration
public class AppConfig {
    @Bean
    public DataSource dataSource() {
        return DataSourceBuilder.create().build();
    }
}
```

## ê´€ë ¨ ê°œë…
- [[IoC-DI-ì»¨í…Œì´ë„ˆ]]
- [[ë¹ˆ-ìƒëª…ì£¼ê¸°ì™€-ìŠ¤ì½”í”„]]
- [[DispatcherServlet-ë™ì‘íë¦„]]

## ë©´ì ‘ ì§ˆë¬¸

1. **ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì´ë€ ë¬´ì—‡ì¸ê°€ìš”?**
   - @Componentê°€ ë¶™ì€ í´ë˜ìŠ¤ë¥¼ ìë™ìœ¼ë¡œ ì°¾ì•„ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ëŠ” ê¸°ëŠ¥
   - @Controller, @Service, @Repositoryë„ ë‚´ë¶€ì— @Component í¬í•¨

2. **@Component, @Service, @Repositoryì˜ ì°¨ì´ëŠ”?**
   - ê¸°ëŠ¥ì  ì°¨ì´: @Repositoryë§Œ ìŠ¤í”„ë§ ë°ì´í„° ì ‘ê·¼ ì˜ˆì™¸ë¥¼ ì¶”ìƒí™”í•˜ëŠ” AOP ì ìš©
   - ì˜ë¯¸ì  ì°¨ì´: ê³„ì¸µë³„ ì—­í• ì„ ëª…ì‹œì ìœ¼ë¡œ í‘œí˜„ (ê°€ë…ì„±, ìœ ì§€ë³´ìˆ˜)

3. **ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì˜ ê¸°ë³¸ ìŠ¤ìº” ë²”ìœ„ëŠ”?**
   - @ComponentScanì´ ë¶™ì€ ì„¤ì • í´ë˜ìŠ¤ì˜ íŒ¨í‚¤ì§€ë¶€í„° í•˜ìœ„ íŒ¨í‚¤ì§€ê¹Œì§€
   - Spring Bootì˜ @SpringBootApplicationì€ ë©”ì¸ í´ë˜ìŠ¤ì˜ íŒ¨í‚¤ì§€ë¶€í„° ìŠ¤ìº”

4. **ê°™ì€ ì´ë¦„ì˜ ë¹ˆì´ ìë™/ìˆ˜ë™ìœ¼ë¡œ ì¤‘ë³µ ë“±ë¡ë˜ë©´?**
   - ê³¼ê±°: ìˆ˜ë™ ë¹ˆì´ ìë™ ë¹ˆì„ ì˜¤ë²„ë¼ì´ë”© (ìš°ì„ ê¶Œ)
   - Spring Boot: ê¸°ë³¸ì ìœ¼ë¡œ ì˜¤ë¥˜ ë°œìƒ (ì¶©ëŒ ë°©ì§€)

5. **ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ì‚¬ìš© ì‹œ ì£¼ì˜í•  ì ì€?**
   - ìŠ¤ìº” ë²”ìœ„ë¥¼ ë„ˆë¬´ ë„“ê²Œ ì„¤ì •í•˜ë©´ ì„±ëŠ¥ ì €í•˜
   - ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” @Beanìœ¼ë¡œ ìˆ˜ë™ ë“±ë¡ í•„ìš”
   - ìˆœí™˜ ì°¸ì¡° ë¬¸ì œ ë°œìƒ ê°€ëŠ¥

6. **@ComponentScanì˜ excludeFiltersë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ”?**
   - í…ŒìŠ¤íŠ¸ ì„¤ì • í´ë˜ìŠ¤ë‚˜ íŠ¹ì • í´ë˜ìŠ¤ë¥¼ ìŠ¤ìº” ëŒ€ìƒì—ì„œ ì œì™¸
   - ì‹¤ë¬´ì—ì„œëŠ” ê¸°ë³¸ ì„¤ì • ì‚¬ìš©, íŠ¹ìˆ˜í•œ ê²½ìš°ì—ë§Œ í•„í„° ì‚¬ìš©

7. **ìƒì„±ìê°€ í•˜ë‚˜ì¼ ë•Œ @Autowiredë¥¼ ìƒëµí•  ìˆ˜ ìˆëŠ” ì´ìœ ëŠ”?**
   - Spring 4.3ë¶€í„° ìƒì„±ìê°€ í•˜ë‚˜ë©´ ìë™ìœ¼ë¡œ ì˜ì¡´ê´€ê³„ ì£¼ì…
   - ìƒì„±ìê°€ ì—¬ëŸ¬ ê°œë©´ ëª…ì‹œì ìœ¼ë¡œ @Autowired í•„ìš”

## ì°¸ê³  ìë£Œ
- ê¹€ì˜í•œì˜ ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬ - ê¸°ë³¸í¸
- Spring Framework Reference - Component Scanning
- https://docs.spring.io/spring-framework/reference/core/beans/classpath-scanning.html
